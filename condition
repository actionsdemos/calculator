parameters:
- name: environment
  type: string
  default: dev

variables:
  ${{ if or(eq(parameters.environment, 'dev'), eq(parameters.environment, 'tst')) }}:
    region: 'central'
  ${{ if eq(parameters.environment, 'both') }} :
    region: 'central, east'
  ${{ else }} :
    region: 'east'


#!/bin/bash

if [ "$environment" == "dev" ] || [ "$environment" == "tst" ]; then
    region="central"
else
    region="central east dev"
fi

# Use the "region" variable in your script or command
echo "Region: $region"


- script: |
      if [ "$(environment)" == "dev" ] && [ "$(region)" == "east" ]; then
        echo "Invalid combination: Dev environment cannot be deployed to the East region."
        exit 1
      elif [ "$(environment)" == "tst" ] && [ "$(region)" == "both" ]; then
        echo "Invalid combination: TST environment cannot be deployed to both regions."
        exit 1
      fi


variables:
    - name: myvar
      value: ${{ parameters.image}}
    steps:
    
    - task: PowerShell@2
      inputs:
        targetType: 'inline'
        script: |
          # Write your PowerShell commands here.
          
          Write-Host "Hello World"
      condition: or( eq(variables.myvar, 'ubuntu-latest'), eq(variables.myvar, 'windows-latest') )
